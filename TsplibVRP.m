classdef TsplibVRP
    properties
        type;
        I;
        J;
        dim;
        optima;
        r;
        c;
        xmin;
        xmax;
        ymin;
        ymax;
        x; 
        y; 
        x0
        y0;  
        d;
        D;
        d0;
        eta;
        definedFunctions       
    end
    methods
        function obj = TsplibVRP(typeOfFunction)
            obj.definedFunctions={'Eil33','Eil51','EilA76','EilB76','EilC76','EilD76','EilA101','EilB101'};
            obj.type=typeOfFunction;
            switch(obj.type)
                case 'Eil33', 
                    obj.I=32;
                    obj.J=4;
                    obj.dim=obj.I+obj.J-1;
                    obj.optima=835;
                    obj.r=[700,400,400,1200,40,80,2000,900,600,750,1500,150,250,1600,450,700,550,650,200,400,300,1300,700,750,1400,4000,600,1000,500,2500,1700,1100];
                    obj.c=[8000,8000,8000,8000];
                    obj.x=[298,309,307,336,320,321,322,323,324,323,314,311,304,293,296,261,297,315,314,321,321,314,313,304,295,283,279,271,264,277,290,319];
                    obj.y=[427,445,464,475,439,437,437,433,433,429,435,442,427,421,418,384,410,407,406,391,398,394,378,382,402,406,399,401,414,439,434,433];
                    A= obj.x;
                    B= obj.y;
                    obj.x0=292;
                    obj.y0=495;
                    for i=1:obj.J
                        A=[A obj.x0];
                        B=[B obj.y0]; 
                    end
                    obj.xmin=min(min(obj.x), obj.x0);
                    obj.xmax=max(max(obj.x), obj.x0);
                    obj.ymin=min(min(obj.y), obj.y0);
                    obj.ymax=max(max(obj.y), obj.y0);;
                    t(:,1)=obj.x;
                    t(:,2)=obj.y;
                    T(:,1)=A;
                    T(:,2)=B;
                    obj.d=round(pdist2(t,t));
                    obj.D=round(pdist2(T,T));
                    O(:,1)=obj.x0;
                    O(:,2)=obj.y0;
                    obj.d0=transpose(round(pdist2(T,O)));
                    obj.eta = 0.5;
                case 'Eil51', 
                    obj.I=50;
                    obj.J=5;
                    obj.dim=obj.I+obj.J-1;
                    obj.optima=521;
                    obj.r=[7,30,16,9,21,15,19,23,11,5,19,29,23,21,10,15,3,41,9,28,8,8,16,10,28,7,15,14,6,19,11,12,23,26,17,6,9,15,14,7,27,13,11,16,10,5,25,17,18,10];
                    obj.c=[160,160,160,160,160];
                    obj.x=[37,49,52,20,40,21,17,31,52,51,42,31,5,12,36,52,27,17,13,57,62,42,16,8,7,27,30,43,58,58,37,38,46,61,62,63,32,45,59,5,10,21,5,30,39,32,25,25,48,56];
                    obj.y=[52,49,64,26,30,47,63,62,33,21,41,32,25,42,16,41,23,33,13,58,42,57,57,52,38,68,48,67,48,27,69,46,10,33,63,69,22,35,15,6,17,10,64,15,10,39,32,55,28,37];
                    A= obj.x;
                    B= obj.y;
                    obj.x0=30;
                    obj.y0=40;
                    for i=1:obj.J
                        A=[A obj.x0];
                        B=[B obj.y0]; 
                    end
                    obj.xmin=min(min(obj.x), obj.x0);
                    obj.xmax=max(max(obj.x), obj.x0);
                    obj.ymin=min(min(obj.y), obj.y0);
                    obj.ymax=max(max(obj.y), obj.y0);;
                    t(:,1)=obj.x;
                    t(:,2)=obj.y;
                    T(:,1)=A;
                    T(:,2)=B;
                    obj.d=round(pdist2(t,t));
                    obj.D=round(pdist2(T,T));
                    O(:,1)=obj.x0;
                    O(:,2)=obj.y0;
                    obj.d0=transpose(round(pdist2(T,O)));
                    obj.eta = 0.5;
                case 'EilA76', 
                    obj.I=75;
                    obj.J=10;
                    obj.dim=obj.I+obj.J-1;
                    obj.optima=826;
                    obj.r=[18,26,11,30,21,19,15,16,29,26,37,16,12,31,8,19,20,13,15,22,28,12,6,27,14,18,17,29,13,22,25,28,27,19,10,12,14,24,16,33,15,11,18,17,21,27,19,20,5,22,12,19,22,16,7,26,14,21,24,13,15,18,11,28,9,37,30,10,8,11,3,1,6,10,20];
                    obj.c=[140,140,140,140,140,140,140,140,140,140];
                    obj.x=[22,36,21,45,55,33,50,55,26,40,55,35,62,62,62,21,33,9,62,66,44,26,11,7,17,41,55,35,52,43,31,22,26,50,55,54,60,47,30,30,12,15,16,21,50,51,50,48,12,15,29,54,55,67,10,6,65,40,70,64,36,30,20,15,50,57,45,38,50,66,59,35,27,40,40];
                    obj.y=[22,26,45,35,20,34,50,45,59,66,65,51,35,57,24,36,44,56,48,14,13,13,28,43,64,46,34,16,26,26,76,53,29,40,50,10,15,66,60,50,17,14,19,48,30,42,15,21,38,56,39,38,57,41,70,25,27,60,64,4,6,20,30,5,70,72,42,33,4,8,5,60,24,20,37];
                    A= obj.x;
                    B= obj.y;
                    obj.x0=40;
                    obj.y0=40;
                    for i=1:obj.J
                        A=[A obj.x0];
                        B=[B obj.y0]; 
                    end
                    obj.xmin=min(min(obj.x), obj.x0);
                    obj.xmax=max(max(obj.x), obj.x0);
                    obj.ymin=min(min(obj.y), obj.y0);
                    obj.ymax=max(max(obj.y), obj.y0);;
                    t(:,1)=obj.x;
                    t(:,2)=obj.y;
                    T(:,1)=A;
                    T(:,2)=B;
                    obj.d=round(pdist2(t,t));
                    obj.D=round(pdist2(T,T));
                    O(:,1)=obj.x0;
                    O(:,2)=obj.y0;
                    obj.d0=transpose(round(pdist2(T,O)));
                    obj.eta = 0.5;
                case 'EilB76', 
                    obj.I=75;
                    obj.J=14;
                    obj.dim=obj.I+obj.J-1;
                    obj.optima=1019;
                    obj.r=[18,26,11,30,21,19,15,16,29,26,37,16,12,31,8,19,20,13,15,22,28,12,6,27,14,18,17,29,13,22,25,28,27,19,10,12,14,24,16,33,15,11,18,17,21,27,19,20,5,22,12,19,22,16,7,26,14,21,24,13,15,18,11,28,9,37,30,10,8,11,3,1,6,10,20];
                    obj.c=[100,100,100,100,100,100,100,100,100,100,100,100,100,100];
                    obj.x=[22,36,21,45,55,33,50,55,26,40,55,35,62,62,62,21,33,9,62,66,44,26,11,7,17,41,55,35,52,43,31,22,26,50,55,54,60,47,30,30,12,15,16,21,50,51,50,48,12,15,29,54,55,67,10,6,65,40,70,64,36,30,20,15,50,57,45,38,50,66,59,35,27,40,40];
                    obj.y=[22,26,45,35,20,34,50,45,59,66,65,51,35,57,24,36,44,56,48,14,13,13,28,43,64,46,34,16,26,26,76,53,29,40,50,10,15,66,60,50,17,14,19,48,30,42,15,21,38,56,39,38,57,41,70,25,27,60,64,4,6,20,30,5,70,72,42,33,4,8,5,60,24,20,37];
                    A= obj.x;
                    B= obj.y;
                    obj.x0=40;
                    obj.y0=40;
                    for i=1:obj.J
                        A=[A obj.x0];
                        B=[B obj.y0]; 
                    end
                    obj.xmin=min(min(obj.x), obj.x0);
                    obj.xmax=max(max(obj.x), obj.x0);
                    obj.ymin=min(min(obj.y), obj.y0);
                    obj.ymax=max(max(obj.y), obj.y0);;
                    t(:,1)=obj.x;
                    t(:,2)=obj.y;
                    T(:,1)=A;
                    T(:,2)=B;
                    obj.d=round(pdist2(t,t));
                    obj.D=round(pdist2(T,T));
                    O(:,1)=obj.x0;
                    O(:,2)=obj.y0;
                    obj.d0=transpose(round(pdist2(T,O)));
                    obj.eta = 0.5;
                case 'EilC76', 
                    obj.I=75;
                    obj.J=8;
                    obj.dim=obj.I+obj.J-1;
                    obj.optima=735;
                    obj.r=[18,26,11,30,21,19,15,16,29,26,37,16,12,31,8,19,20,13,15,22,28,12,6,27,14,18,17,29,13,22,25,28,27,19,10,12,14,24,16,33,15,11,18,17,21,27,19,20,5,22,12,19,22,16,7,26,14,21,24,13,15,18,11,28,9,37,30,10,8,11,3,1,6,10,20];
                    obj.c=[180,180,180,180,180,180,180,180];
                    obj.x=[22,36,21,45,55,33,50,55,26,40,55,35,62,62,62,21,33,9,62,66,44,26,11,7,17,41,55,35,52,43,31,22,26,50,55,54,60,47,30,30,12,15,16,21,50,51,50,48,12,15,29,54,55,67,10,6,65,40,70,64,36,30,20,15,50,57,45,38,50,66,59,35,27,40,40];
                    obj.y=[22,26,45,35,20,34,50,45,59,66,65,51,35,57,24,36,44,56,48,14,13,13,28,43,64,46,34,16,26,26,76,53,29,40,50,10,15,66,60,50,17,14,19,48,30,42,15,21,38,56,39,38,57,41,70,25,27,60,64,4,6,20,30,5,70,72,42,33,4,8,5,60,24,20,37];
                    A= obj.x;
                    B= obj.y;
                    obj.x0=40;
                    obj.y0=40;
                    for i=1:obj.J
                        A=[A obj.x0];
                        B=[B obj.y0]; 
                    end
                    obj.xmin=min(min(obj.x), obj.x0);
                    obj.xmax=max(max(obj.x), obj.x0);
                    obj.ymin=min(min(obj.y), obj.y0);
                    obj.ymax=max(max(obj.y), obj.y0);;
                    t(:,1)=obj.x;
                    t(:,2)=obj.y;
                    T(:,1)=A;
                    T(:,2)=B;
                    obj.d=round(pdist2(t,t));
                    obj.D=round(pdist2(T,T));
                    O(:,1)=obj.x0;
                    O(:,2)=obj.y0;
                    obj.d0=transpose(round(pdist2(T,O)));
                    obj.eta = 0.5;    
                    
                case 'EilD76', 
                    obj.I=75;
                    obj.J=7;
                    obj.dim=obj.I+obj.J-1;
                    obj.optima=682;
                    obj.r=[18,26,11,30,21,19,15,16,29,26,37,16,12,31,8,19,20,13,15,22,28,12,6,27,14,18,17,29,13,22,25,28,27,19,10,12,14,24,16,33,15,11,18,17,21,27,19,20,5,22,12,19,22,16,7,26,14,21,24,13,15,18,11,28,9,37,30,10,8,11,3,1,6,10,20];
                    obj.c=[220,220,220,220,220,220,220];
                    obj.x=[22,36,21,45,55,33,50,55,26,40,55,35,62,62,62,21,33,9,62,66,44,26,11,7,17,41,55,35,52,43,31,22,26,50,55,54,60,47,30,30,12,15,16,21,50,51,50,48,12,15,29,54,55,67,10,6,65,40,70,64,36,30,20,15,50,57,45,38,50,66,59,35,27,40,40];
                    obj.y=[22,26,45,35,20,34,50,45,59,66,65,51,35,57,24,36,44,56,48,14,13,13,28,43,64,46,34,16,26,26,76,53,29,40,50,10,15,66,60,50,17,14,19,48,30,42,15,21,38,56,39,38,57,41,70,25,27,60,64,4,6,20,30,5,70,72,42,33,4,8,5,60,24,20,37];
                    A= obj.x;
                    B= obj.y;
                    obj.x0=40;
                    obj.y0=40;
                    for i=1:obj.J
                        A=[A obj.x0];
                        B=[B obj.y0]; 
                    end
                    obj.xmin=min(min(obj.x), obj.x0);
                    obj.xmax=max(max(obj.x), obj.x0);
                    obj.ymin=min(min(obj.y), obj.y0);
                    obj.ymax=max(max(obj.y), obj.y0);;
                    t(:,1)=obj.x;
                    t(:,2)=obj.y;
                    T(:,1)=A;
                    T(:,2)=B;
                    obj.d=round(pdist2(t,t));
                    obj.D=round(pdist2(T,T));
                    O(:,1)=obj.x0;
                    O(:,2)=obj.y0;
                    obj.d0=transpose(round(pdist2(T,O)));
                    obj.eta = 0.5;
                    
                case 'EilA101', 
                    obj.I=100;
                    obj.J=8;
                    obj.dim=obj.I+obj.J-1;
                    obj.optima=817;
                    obj.r=[10,7,13,19,26,3,5,9,16,16,12,19,23,20,8,19,2,12,17,9,11,18,29,3,6,17,16,16,9,21,27,23,11,14,8,5,8,16,31,9,5,5,7,18,16,1,27,36,30,13,10,9,14,18,2,6,7,18,28,3,13,19,10,9,20,25,25,36,6,5,15,25,9,8,18,13,14,3,23,6,26,16,11,7,41,35,26,9,15,3,1,2,22,27,20,11,12,10,9,17];
                    obj.c=[200,200,200,200,200,200,200,200];
                    obj.x=[41,35,55,55,15,25,20,10,55,30,20,50,30,15,30,10,5,20,15,45,45,45,55,65,65,45,35,41,64,40,31,35,53,65,63,2,20,5,60,40,42,24,23,11,6,2,8,13,6,47,49,27,37,57,63,53,32,36,21,17,12,24,27,15,62,49,67,56,37,37,57,47,44,46,49,49,53,61,57,56,55,15,14,11,16,4,28,26,26,31,15,22,18,26,25,22,25,19,20,18];
                    obj.y=[49,17,45,20,30,30,50,43,60,60,65,35,25,10,5,20,30,40,60,65,20,10,5,35,20,30,40,37,42,60,52,69,52,55,65,60,20,5,12,25,7,12,3,14,38,48,56,52,68,47,58,43,31,29,23,12,12,26,24,34,24,58,69,77,77,73,5,39,47,56,68,16,17,13,11,42,43,52,48,37,54,47,37,31,22,18,18,52,35,67,19,22,24,27,24,27,21,21,26,18];
                    A= obj.x;
                    B= obj.y;
                    obj.x0=35;
                    obj.y0=35;
                    for i=1:obj.J
                        A=[A obj.x0];
                        B=[B obj.y0]; 
                    end
                    obj.xmin=min(min(obj.x), obj.x0);
                    obj.xmax=max(max(obj.x), obj.x0);
                    obj.ymin=min(min(obj.y), obj.y0);
                    obj.ymax=max(max(obj.y), obj.y0);;
                    t(:,1)=obj.x;
                    t(:,2)=obj.y;
                    T(:,1)=A;
                    T(:,2)=B;
                    obj.d=round(pdist2(t,t));
                    obj.D=round(pdist2(T,T));
                    O(:,1)=obj.x0;
                    O(:,2)=obj.y0;
                    obj.d0=transpose(round(pdist2(T,O)));
                    obj.eta = 0.5;
                case 'EilB101', 
                    obj.I=100;
                    obj.J=14;
                    obj.dim=obj.I+obj.J-1;
                    obj.optima=1077;
                    obj.r=[10,7,13,19,26,3,5,9,16,16,12,19,23,20,8,19,2,12,17,9,11,18,29,3,6,17,16,16,9,21,27,23,11,14,8,5,8,16,31,9,5,5,7,18,16,1,27,36,30,13,10,9,14,18,2,6,7,18,28,3,13,19,10,9,20,25,25,36,6,5,15,25,9,8,18,13,14,3,23,6,26,16,11,7,41,35,26,9,15,3,1,2,22,27,20,11,12,10,9,17];
                    obj.c=[112,112,112,112,112,112,112,112,112,112,112,112,112,112];
                    obj.x=[41,35,55,55,15,25,20,10,55,30,20,50,30,15,30,10,5,20,15,45,45,45,55,65,65,45,35,41,64,40,31,35,53,65,63,2,20,5,60,40,42,24,23,11,6,2,8,13,6,47,49,27,37,57,63,53,32,36,21,17,12,24,27,15,62,49,67,56,37,37,57,47,44,46,49,49,53,61,57,56,55,15,14,11,16,4,28,26,26,31,15,22,18,26,25,22,25,19,20,18];
                    obj.y=[49,17,45,20,30,30,50,43,60,60,65,35,25,10,5,20,30,40,60,65,20,10,5,35,20,30,40,37,42,60,52,69,52,55,65,60,20,5,12,25,7,12,3,14,38,48,56,52,68,47,58,43,31,29,23,12,12,26,24,34,24,58,69,77,77,73,5,39,47,56,68,16,17,13,11,42,43,52,48,37,54,47,37,31,22,18,18,52,35,67,19,22,24,27,24,27,21,21,26,18];
                    A= obj.x;
                    B= obj.y;
                    obj.x0=35;
                    obj.y0=35;
                    for i=1:obj.J
                        A=[A obj.x0];
                        B=[B obj.y0]; 
                    end
                    obj.xmin=min(min(obj.x), obj.x0);
                    obj.xmax=max(max(obj.x), obj.x0);
                    obj.ymin=min(min(obj.y), obj.y0);
                    obj.ymax=max(max(obj.y), obj.y0);;
                    t(:,1)=obj.x;
                    t(:,2)=obj.y;
                    T(:,1)=A;
                    T(:,2)=B;
                    obj.d=round(pdist2(t,t));
                    obj.D=round(pdist2(T,T));
                    O(:,1)=obj.x0;
                    O(:,2)=obj.y0;
                    obj.d0=transpose(round(pdist2(T,O)));
                    obj.eta = 0.5;
              otherwise,
                disp('fitness function not defined');
             end
        end
        
        function [fitness, sol] = evaluation(obj, tour)
            global eval;
            eval = eval+1;
            [fitness, sol] = MyCost_VRP (tour,obj);
        end
    end
end
